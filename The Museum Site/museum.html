<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Müze Bilgileri</title>
    <link rel="stylesheet" href="museum_styles.css">
    <link rel="stylesheet" href="responsive.css">
    
</head>
<body>

    <header id="header" class="header">
        <nav id="nav" class="nav">
            <div id="logo" class="logo"><a href=""><img src="img/Logo.svg" alt=""></a> 
            </div>
            <div id="menu" class="menu">
                <ul>
                    <li><a href="index.html">Anasayfa</a></li>
                    <li><a href="index.html#about">Hakkında</a></li>
                    <li><a href="explore.html">Müzeler</a></li>
                    <li><a href="index.html#explore">Keşfet</a></li>
                    <li><a href="bilet.html" class="btn main_btn" style="color: white;">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm0-160q17 0 28.5-11.5T520-480q0-17-11.5-28.5T480-520q-17 0-28.5 11.5T440-480q0 17 11.5 28.5T480-440Zm0-160q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm320 440H160q-33 0-56.5-23.5T80-240v-160q33 0 56.5-23.5T160-480q0-33-23.5-56.5T80-560v-160q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v160q-33 0-56.5 23.5T800-480q0 33 23.5 56.5T880-400v160q0 33-23.5 56.5T800-160Zm0-80v-102q-37-22-58.5-58.5T720-480q0-43 21.5-79.5T800-618v-102H160v102q37 22 58.5 58.5T240-480q0 43-21.5 79.5T160-342v102h640ZM480-480Z"/></svg>Bilet Al</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <div class="container">
        <h1 id="museumTitle"></h1>
        <img id="museumImage" src="" alt="Müze Resmi" />
        <p id="museumDescription"></p>
        <div id="map" class="map-container">
            <!-- Hata durumu için container -->
            <div id="mapError" class="map-error" style="display: none;">
                <svg class="map-error-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
                <p>Harita bilgilerine şu anda ulaşılamıyor</p>
            </div>
        </div>

        <!-- Yorum bölümü -->
        <div class="comments-section">
            <h2>Ziyaretçi Deneyimleri</h2>
            
            <!-- Yorum ekleme formu -->
            <div class="comment-form">
                <h3>Deneyiminizi Paylaşın</h3>
                <form id="commentForm">
                    <div class="form-group">
                        <input type="text" id="userName" placeholder="Adınız Soyadınız" required>
                    </div>
                    <div class="form-group">
                        <textarea id="userComment" placeholder="Deneyiminizi paylaşın..." required></textarea>
                    </div>
                    <button type="submit" class="submit-button">Yorumu Paylaş</button>
                </form>
            </div>

            <!-- Mevcut yorumlar -->
            <div class="comments-container">
                <div class="comment-card">
                    <div class="comment-header">
                        <div class="user-info">
                            <div class="user-avatar">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                                </svg>
                            </div>
                            <div class="user-details">
                                <h3>Ahmet Yılmaz</h3>
                                <span class="comment-date">23 Mart 2024</span>
                            </div>
                        </div>
                    </div>
                    <div class="comment-content">
                        <p>Müzeyi geçen hafta ziyaret ettim. Özellikle Osmanlı dönemi eserleri çok etkileyiciydi. Rehberli tur hizmeti de oldukça faydalıydı. Kesinlikle tavsiye ederim!</p>
                    </div>
                    <div class="comment-actions">
                        <button class="action-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                            <span>Beğen</span>
                        </button>
                        <button class="action-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                                <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                            </svg>
                            <span>Yanıtla</span>
                        </button>
                    </div>
                </div>

                <div class="comment-card">
                    <div class="comment-header">
                        <div class="user-info">
                            <div class="user-avatar">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                                </svg>
                            </div>
                            <div class="user-details">
                                <h3>Ayşe Demir</h3>
                                <span class="comment-date">20 Mart 2024</span>
                            </div>
                        </div>
                    </div>
                    <div class="comment-content">
                        <p>Aile dostu bir müze. Çocuklar için eğitici aktiviteler ve interaktif sergiler mevcut. Giriş ücreti de gayet makul. Hafta sonu için ideal bir gezi noktası.</p>
                    </div>
                    <div class="comment-actions">
                        <button class="action-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                            <span>Beğen</span>
                        </button>
                        <button class="action-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                                <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                            </svg>
                            <span>Yanıtla</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer id="footer" class="footer">
        <div class="footer-container">
            <div class="footer-left">
                <img src="img/logo.svg" alt="Türkiye Miras Müzeleri" class="footer-logo">
                <p class="footer-description">
                    Geçmişin zengin kültürel mirasını geleceğe taşıyan tarihe ışık tutan bir yolculuk.
                </p>
                <div class="social-icons">
                    <a href="#"><img src="img/instagram.svg" alt="Instagram"></a>
                    <a href="#"><img src="img/facebook.svg" alt="Facebook"></a>
                    <a href="#"><img src="img/twitter.svg" alt="Twitter"></a>
                    <a href="#"><img src="img/youtube.svg" alt="YouTube"></a>
                </div>
            </div>

            <div class="footer-right">
                <div class="footer-text">
                <p>
                    Bir müze, yalnızca eski eşyaların sergilendiği bir mekân değil; her köşesinde geçmişin soluk aldığı, kültürlerin ve hikayelerin bir araya geldiği yaşayan bir hafızadır.
                </p>
            </div>

            <div class="footer_menu">
                <div class="footer-column">
                    <h3>ORGANİZASYON</h3>
                    <ul>
                        <li><a href="#">İletişime Geçin</a></li>
                        <li><a href="#">Geribildirimler</a></li>
                        <li><a href="#">Haberler & Duyurular</a></li>
                        <li><a href="#">SSS</a></li>
                        <li><a href="#">Bizimle Çalışın</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>HIZLI MENÜ</h3>
                    <ul>
                        <li><a href="index.html">Anasayfa</a></li>
                        <li><a href="index.html#about">Hakkında</a></li>
                        <li><a href="#">Ziyaret & Bilgi Al</a></li>
                        <li><a href="explore.html">Müzeler</a></li>
                        <li><a href="index.html#explore">Keşfet</a></li>
                        <li><a href="#">Bilet Al</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>BİLGİLER</h3>
                    <ul>
                        <li><a href="#">Erişebilirlik</a></li>
                        <li><a href="#">Çerezler & Bildirimler</a></li>
                        <li><a href="#">Gizlilik & Güvenlik</a></li>
                        <li><a href="#">Kullanıcı Sözleşmesi</a></li>
                    </ul>
                </div>
            </div>
            </div>
        </div>
    </footer>

    <script>
        // URL'den müze adını al
        const urlParams = new URLSearchParams(window.location.search);
        const museumName = urlParams.get('museum');

        // Google Maps API'yi yükle
        function loadGoogleMapsScript() {
            const script = document.createElement('script');
            script.src = `API KEY`;
            script.defer = true;
            document.head.appendChild(script);
            script.onload = initMap;
        }

        // Haritayı başlat
        function initMap(latitude, longitude) {
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 15,
                center: { lat: latitude, lng: longitude },
                disableDefaultUI: true,
                zoomControl: true
            });

            // Marker ekle
            new google.maps.Marker({
                position: { lat: latitude, lng: longitude },
                map: map,
                animation: google.maps.Animation.DROP
            });
        }

        // API'den müze bilgilerini al
        const fetchMuseumInfo = async (museum) => {
            try {
                // Wikipedia API çağrısı
                const wikiResponse = await fetch(`https://tr.wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&explaintext&exlimit=1&titles=${encodeURIComponent(museum)}&format=json&pithumbsize=1000&origin=*`);
                const wikiData = await wikiResponse.json();
                const page = wikiData.query.pages[Object.keys(wikiData.query.pages)[0]];

                if (page && page.extract && page.thumbnail) {
                    document.getElementById('museumTitle').innerText = page.title;
                    document.getElementById('museumImage').src = page.thumbnail.source;
                    document.getElementById('museumDescription').innerText = page.extract;

                    // Google Places API ile müze konumunu bul
                    const geocoder = new google.maps.Geocoder();
                    geocoder.geocode({ address: `${museum}, Turkey` }, (results, status) => {
                        if (status === 'OK' && results[0]) {
                            const location = results[0].geometry.location;
                            initMap(location.lat(), location.lng());
                        } else {
                            showMapError();
                        }
                    });
                } else {
                    document.getElementById('museumTitle').innerText = 'Müze Bulunamadı';
                    document.getElementById('museumDescription').innerText = 'Bu müzeye ait bilgi bulunamadı.';
                }
            } catch (error) {
                console.error('Hata:', error);
                document.getElementById('museumTitle').innerText = 'Müze Bulunamadı';
                document.getElementById('museumDescription').innerText = 'Bir hata oluştu. Lütfen daha sonra tekrar deneyin.';
                showMapError();
            }
        };

        // Sayfa yüklendiğinde
        if (museumName) {
            loadGoogleMapsScript();
            fetchMuseumInfo(museumName);
        }

        function showMapError() {
            const mapContainer = document.getElementById('map');
            const mapError = document.getElementById('mapError');
            mapError.style.display = 'flex';
            mapContainer.style.backgroundColor = '#f8f9fa';
        }
    </script>

</body>
</html>
